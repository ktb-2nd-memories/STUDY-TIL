# TIL

## 날짜: 2025-02-06

### 스크럼
- 학습 목표 1 : 동시성, 스케줄링, 병렬성

### 새로 배운 내용

| **구분** | **정의** | **비고** |
| --- | --- | --- |
| **동시성** | 단일 프로세서에서 여러 개의 작업(Task)을 번갈아 가며 실행하는 개념으로, 마치 여러 작업이 동시에 수행되는 것처럼 보이게 하는 방식 | - 멀티스레딩과 비동기 프로그래밍에서 중요한 개념 <br>- 하나의 CPU에서 여러 작업이 빠르게 교차 실행됨 (인터리빙) |
| **병렬성** | 다중 코어(Multi-core) 환경에서 여러 개의 작업이 실제로 동시에 실행되는 개념 | - 멀티코어 CPU에서 각각의 작업이 물리적으로 동시에 실행됨 <br>- 고성능 컴퓨팅(HPC), GPU 연산 등에 활용 |
| **스케줄러** | 운영체제가 CPU 및 기타 자원을 여러 프로세스에게 효율적으로 분배하는 기능을 수행하는 모듈 | - CPU 스케줄러: 프로세스의 실행 순서를 결정 <br>- 디스크 스케줄러, 네트워크 스케줄러 등의 다양한 형태 존재 |
| **스케줄러 - 라운드로빈 스케줄링** | 각 프로세스가 미리 정해진 시간 할당량(Time Quantum)만큼 번갈아 실행되며, 시간이 초과되면 다음 프로세스로 교체되는 방식 | - 선점형 스케줄링 기법 중 하나 <br>- 시분할 시스템에서 많이 사용됨 <br>- 짧은 응답 시간을 보장하지만, 너무 작은 Time Quantum 설정 시 오버헤드 발생 |
| **스케줄러 - 콘보이 현상(Convoy Effect)** | 실행 시간이 긴 프로세스가 먼저 CPU를 점유하면서 짧은 실행 시간을 가진 프로세스들이 대기하게 되는 현상 | - FCFS(First-Come, First-Served) 스케줄링에서 발생 가능 <br>- 해결책: 선점형 스케줄링 기법 활용 (예: Shortest Remaining Time First) |
| **스케줄러 - 선점형/비선점형 스케줄링** | - **선점형 스케줄링**: 실행 중인 프로세스를 강제로 중단하고 다른 프로세스를 실행할 수 있는 방식 <br>- **비선점형 스케줄링**: 실행 중인 프로세스가 종료될 때까지 CPU를 점유하는 방식 | - **선점형 스케줄링 예시**: Round Robin, Shortest Ramaining Time First(SRTF), Priority Scheduling(선점형) <br>- 비선점형 스케줄링 예시: First-Come, First-Served(FCFS), Shortest Job First(SJF, 비선점형), Priority Scheduling(비선점형) |
| **컨텍스트 스위칭** | 실행 중인 프로세스 또는 스레드의 상태(Context)를 저장하고, 다른 프로세스의 상태를 복원하여 실행하는 과정 | - 운영체제의 멀티태스킹 기능 구현에 필수 <br>- 컨텍스트 저장에는 레지스터, 프로세스 제어 블록(PCB) 등이 포함됨 <br>- 컨텍스트 스위칭이 자주 발생하면 오버헤드(성능 저하) 유발 |
| **스레드풀** | 일정 개수의 스레드를 미리 생성하고 필요할 때마다 작업을 할당하여 실행하며, 완료된 스레드는 재사용하는 기법 | - 스레드 생성/소멸 오버헤드를 줄이고 성능을 최적화하는 방식 <br>- Java에서는 `ExecutorService` (e.g., `ThreadPoolExecutor` )를 통해 스레드풀을 지원 |
| **암달의 법칙 (Amdahl’s Law)** | 병렬 시스템에서 특정 부분을 최적화하더라도 전체 성능 향상에는 한계가 있음을 설명하는 법칙 | - 병렬 컴퓨팅 및 성능 최적화 이론에서 활용됨 <br>- 공식을 통해 병렬화할 수 없는 코드가 전체 성능 향상에 미치는 영향을 분석 |
| **c10k 문제** | 서버가 동시 10,000개 이상의 클라이언트 연결을 효율적으로 처리하는 문제 | - 네트워크 소켓 처리 및 I/O 성능 최적화가 핵심 과제 <br>- 해결 방법: Non-blocking I/O(NIO), epoll/kqueue, 멀티스레딩, 이벤트 기반 아키텍처 사용 |

#### 1. 동시성과 병렬성의 차이를 설명해주세요.
- **동시성(Concurrency)**: 여러 작업(Task)이 번갈아가며 실행되며, 마치 동시에 수행되는 것처럼 보이도록 하는 개념
- **병렬성(Parallelism)**: 여러 작업(Task)이 실제로 동시에 실행되는 개념
- **멀티 쓰레드 환경에서의 동시성과 병렬성을 설명해주세요.**
  - **멀티스레드 동시성**: 하나의 CPU(core)에서 여러 스레드가 번갈아 실행되며, 마치 동시에 실행되는 것처럼 보이는 방식 (인터리빙 방식)
  - **멀티스레드 병렬성**: 다중 코어를 활용하여 여러 스레드가 실제로 동시에 실행되는 방식

> **출처**
>- Oracle Java Concurrency:<br>https://docs.oracle.com/javase/tutorial/essential/concurrency/
>- Java Concurrency in Practice (Brian Goetz)

#### 2. 컨텍스트 스위칭이 발생할 때 생기는 부정적인 영향에 대해서 설명해주세요.
- **CPU 오버헤드 발생**: 컨텍스트 정보를 저장하고 복원하는 과정에서 추가적인 연산이 필요
- **캐시 미스 증가**: 다른 프로세스의 실행으로 인해 CPU 캐시가 변경되면서 성능 저하 가능
- **성능 저하**: 컨텍스트 스위칭이 자주 발생하면 오버헤드 증가로 인해 전체 시스템 성능이 낮아짐

> **출처**
>- Linux Kernel Process Management:<br>https://www.kernel.org/doc/html/latest/scheduler/sched-arch.html
>- Operating System Concepts (Silberschatz, Galvin, Gagne)

#### 3. 스레드풀을 사용하는 이유와 장단점에 대해서 설명해주세요.
- **스레드풀 사용 이유**
  - **스레드 생성 비용 절감**: 스레드를 매번 생성/소멸하는 비용을 줄이고, 미리 생성된 스레드를 재사용하여 효율성 증대
  - **리소스 관리 최적화**: 일정 개수의 스레드만 생성하여 과도한 스레드 사용으로 인한 시스템 리소스 낭비 방지
  - **응답 시간 단축**: 새로운 작업을 할당할 때 즉시 실행 가능
- **장점**
  - **성능 향상**: 기존 스레드를 재사용하여 실행 속도 증가
  - **안정적인 리소스 관리**: 과도한 스레드 생성 방지, 메모리 사용량 절약
  - **작업 큐 활용**: 일정량의 작업을 대기열(Queue)에 저장하고 순차적으로 실행
- **단점**
  - **스레드 관리 필요**: 적절한 스레드 개수를 설정하지 않으면 과도한 스레드 사용으로 인한 성능 저하 가능
  - **데드락(Deadlock) 위험**: 스레드풀 내 스레드가 모두 작업을 대기할 경우 교착 상태 발생 가능

> **출처**
>- Java Executor Framework:<br>https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/concurrent/ExecutorService.html
>- Java Concurrency in Practice (Brian Goetz)

#### 4. 프로세스 스케쥴링과 스레드 스케쥴링의 차이점에 대해서 설명해주세요.
| **구분** | **프로세스 스케줄링** | **스레드 스케줄링** |
| --- | --- | --- |
| **정의** | CPU가 여러 프로세스를 실행하기 위한 순서를 결정하는 방식 | 하나의 프로세스 내에서 여러 스레드의 실행 순서를 결정하는 방식 |
| **단위** | 프로세스 단위로 실행 순서 관리 | 스레드 단위로 실행 순서 관리 |
| **종류** | 장기(고정), 중기(메모리), 단기(CPU) 스케줄링 | OS가 관리하는 커널 스레드(Kernel Thread)와 사용자 스레드(User Thread) 존재 |
| **컨텍스트 스위칭 비용** | 프로세스 간 스위칭 비용이 큼 (주소 공간 전환 필요) | 같은 프로세스 내에서는 스위칭 비용이 상대적으로 적음 |
| **예제** | OS 프로세스 관리 (Linux Task Scheduler) | Java의 `Thread` 클래스 및 `ExecutorService` |

> **출처**
>- Linux Kernel Task Scheduling:<br>https://www.kernel.org/doc/html/latest/scheduler/index.html
>- Operating System Concepts (Silberschatz, Galvin, Gagne)

### 오늘의 회고
- 스케줄러 기능을 사용하면서도 어떤 원리인지 제대로 알고 있지 못했던 것 같다. 이번 기회를 통해 딥다이브할 수 있었다.